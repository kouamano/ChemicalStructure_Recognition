(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 12.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[     16394,        423]
NotebookOptionsPosition[     14067,        372]
NotebookOutlinePosition[     14413,        387]
CellTagsIndexPosition[     14370,        384]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell[BoxData[
 RowBox[{"SetDirectory", "[", 
  "\"\</home/kamano/gitsrc/ChemicalStructureRecognition\>\"", "]"}]], "Input",\

 CellChangeTimes->{{3.78919249698912*^9, 3.78919250452232*^9}, 
   3.78919254080787*^9},
 CellLabel->"In[14]:=",ExpressionUUID->"59b5a4d2-1faa-49de-831f-a1d669c435cd"],

Cell[BoxData["\<\"/home/kamano/gitsrc/ChemicalStructureRecognition\"\>"], \
"Output",
 CellChangeTimes->{3.789192542780408*^9},
 CellLabel->"Out[14]=",ExpressionUUID->"1d310aa1-884f-4b21-afc0-38a6a7f783a7"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Images", "Section",
 CellChangeTimes->{{3.789191045625144*^9, 
  3.789191056147408*^9}},ExpressionUUID->"e3441ab6-3c4c-4291-bc55-\
7615883d132a"],

Cell[BoxData[
 RowBox[{
  RowBox[{"cdata", "=", 
   RowBox[{"ChemicalData", "[", "]"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.782587936304096*^9, 3.782587952872203*^9}},
 CellLabel->"In[1]:=",ExpressionUUID->"ee488f20-8a9c-46fa-aaca-720cc00dbedb"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"ChemicalData", "[", 
  RowBox[{"cdata", "[", 
   RowBox[{"[", "1", "]"}], "]"}], "]"}]], "Input",
 CellChangeTimes->{{3.782587980427322*^9, 3.782587988047768*^9}},
 CellLabel->"In[2]:=",ExpressionUUID->"45c888c4-1872-44df-aea5-b98bb1565b70"],

Cell[BoxData[
 GraphicsBox[{
   {RGBColor[0.43333333333333335`, 0.4666666666666667, 0.4666666666666667], 
    AbsoluteThickness[0.55], InsetBox[
     StyleBox["\<\"H\"\>",
      StripOnInput->False,
      ScriptSizeMultipliers->0.8,
      ScriptMinSize->8,
      FontSize->Scaled[0.2830188679245283],
      FontWeight->Plain], {200., 0.}], LineBox[{{220., 0.}, {250., 0.}}], 
    {RGBColor[0.43333333333333335`, 0.4666666666666667, 0.4666666666666667], 
     InsetBox[
      StyleBox["\<\"H\"\>",
       StripOnInput->False,
       ScriptSizeMultipliers->0.8,
       ScriptMinSize->8,
       FontSize->Scaled[0.2830188679245283],
       FontWeight->Plain], {300., 0.}], 
     LineBox[{{250., 0.}, {280., 0.}}]}}, {}, {}},
  ImageSize->{{0., 42.4}, {0., 18.106761565836294`}},
  PlotRange->{{177.5, 318.}, {-30., 30.}}]], "Output",
 CellChangeTimes->{3.782587995962234*^9, 3.7891796444138727`*^9, 
  3.789191467106554*^9, 3.78919227292325*^9},
 CellLabel->"Out[2]=",ExpressionUUID->"bff60894-43c0-48d0-b924-c98ca6aaedb4"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"r", "[", "1", "]"}], "=", 
  RowBox[{"Rasterize", "[", 
   RowBox[{
    RowBox[{"ChemicalData", "[", 
     RowBox[{"cdata", "[", 
      RowBox[{"[", "1", "]"}], "]"}], "]"}], ",", 
    RowBox[{"RasterSize", "\[Rule]", "300"}], ",", 
    RowBox[{"ImageSize", "\[Rule]", "100"}]}], "]"}]}]], "Input",
 CellChangeTimes->{{3.782591485515418*^9, 3.782591506398007*^9}, {
  3.7891922765320387`*^9, 3.789192278161436*^9}, {3.789192332187608*^9, 
  3.789192339784664*^9}, {3.7891923722987328`*^9, 3.789192378968891*^9}},
 CellLabel->"In[9]:=",ExpressionUUID->"af4ce1bd-514f-404c-8f99-968262a2f3ee"],

Cell[BoxData[
 GraphicsBox[
  TagBox[RasterBox[CompressedData["
1:eJzt3T1rk2EUgOGoi6N/wd0f4OroWvEHtFjFpUJbKA4FVwehQ0EcxM3BD1AH
HSpIqUORdhBKKy0iAUWrWD9K7Aexxzj3jWjbpyex18VJSLKcF/LcWRLI8b5L
PecP12q1oaOtu57ekVODg72XzxxrPTk7MHTxwkD/udMDw/0X+gdP9h1pvXil
dTtxqFb7/TgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA2Hdfv337vLKyfZrN
ZtG9jUajcu/a+nrRvXSUzc3NymPwfXW16N6tra3KvStfvhTdW+nq2NjAyMj2
efvuXdG99x89qtz7bGqq6F46ytz8fOUxuHHrVtG96xsblXuHR0eL7q2kQRJp
MDRIKg2GBkmlwdAgqTQYGiSVBkODpNJgaJBUGgwNkkqDoUFSaTA0SCoNhgZJ
pcHQIKk0GBoklQZDg6TSYGiQVBoMDZJKg6FBUmkwNEgqDYYGSaXB0CCpNBga
JJUGQ4Ok0mBokFQaDA2SSoOhQVJpMNo3+KZeb11nubnz4IEGadfg9Zs3ix6/
76urnd9g1mjwQGnXYNZoUIMHjQZDg6TSYGiQVBoMDZJKg6FBUmkw/pcGP3z8
+GppqXvnxezsxOTk3MJC+pXsZtb//T+UNRjtG1xYXPxZ0t5+R3+3zbeNZj9n
B7/raNfgtfHxosfvx9pa5d6OarD1sVZ07942+KZen56Z6d55MjFx+96959PT
6Veym2k0Gv/6xv2hwR0cg7/XFb+T6a4G6VIaDA2SSoOhQVJpMDRIKg2GBkml
wdAgqTQYGiSVBkODpNJgaJBUGgwNkkqDoUFSaTA0SCoNhgZJpcHQIKk0GBok
lQZDg6TSYGiQVBoMDZJKg6FBUmkwNEgqDYYGSaXB0CCpNBgaJJUGQ4Ok0mBo
kFQaDA2SSoMtTycnWzlsn+VPn4rufTk3V7l36fXronvpKO+XlyuPQemP4maz
Wbn34ePHRfcCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwQPwCCeRV
PA==
    "], {{0, 128}, {300, 0}}, {0, 255},
    ColorFunction->RGBColor],
   BoxForm`ImageTag["Byte", ColorSpace -> "RGB", Interleaving -> True],
   Selectable->False],
  DefaultBaseStyle->"ImageGraphics",
  ImageSize->100,
  ImageSizeRaw->{300, 128},
  PlotRange->{{0, 300}, {0, 128}}]], "Output",
 CellChangeTimes->{3.782591508424016*^9, 3.789179645377982*^9, 
  3.789191468330717*^9, 3.789192279264659*^9, 3.789192340875301*^9, 
  3.7891923797492*^9},
 CellLabel->"Out[9]=",ExpressionUUID->"8a71c802-802b-4160-a164-56bfdf9f43ae"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Information", "[", 
  RowBox[{"r", "[", "1", "]"}], "]"}]], "Input",
 CellChangeTimes->{{3.782588010104088*^9, 3.782588016343568*^9}, {
  3.7825881120112467`*^9, 3.7825881333523417`*^9}, {3.7891926988459873`*^9, 
  3.789192703467329*^9}},
 CellLabel->"In[18]:=",ExpressionUUID->"c7e7d7a8-182f-49a4-b7bf-ce12db2b88dd"],

Cell[BoxData[
 InterpretationBox[
  StyleBox[
   FrameBox[
    TagBox[GridBox[{
       {
        ItemBox[
         PaneBox[
          StyleBox["\<\" Image\"\>", "InformationTitleText",
           StripOnInput->False],
          FrameMargins->{{4, 0}, {-1, 1}}],
         BaseStyle->"InformationTitleBackground",
         StripOnInput->False]},
       {
        PaneBox[GridBox[{
           {
            
            DynamicModuleBox[{System`InformationDump`open$$ = {
             False, False, False, False, False, False, False}}, 
             StyleBox[GridBox[{
                {
                 TagBox[
                  TooltipBox[
                   StyleBox["\<\" Color Space\"\>", "InformationRowLabel",
                    StripOnInput->False],
                   "\"ColorSpace\"",
                   TooltipStyle->"TextStyling"],
                  Annotation[#, "ColorSpace", "Tooltip"]& ], "\<\"RGB\"\>"},
                {
                 TagBox[
                  TooltipBox[
                   StyleBox["\<\" Image Dimensions\"\>", "InformationRowLabel",
                    StripOnInput->False],
                   "\"ImageDimensions\"",
                   TooltipStyle->"TextStyling"],
                  Annotation[#, "ImageDimensions", "Tooltip"]& ], 
                 RowBox[{"{", 
                  RowBox[{"300", ",", "128"}], "}"}]},
                {
                 TagBox[
                  TooltipBox[
                   StyleBox["\<\" Channels\"\>", "InformationRowLabel",
                    StripOnInput->False],
                   "\"Channels\"",
                   TooltipStyle->"TextStyling"],
                  Annotation[#, "Channels", "Tooltip"]& ], "3"},
                {
                 TagBox[
                  TooltipBox[
                   StyleBox["\<\" Interleaving\"\>", "InformationRowLabel",
                    StripOnInput->False],
                   "\"Interleaving\"",
                   TooltipStyle->"TextStyling"],
                  Annotation[#, "Interleaving", "Tooltip"]& ], "True"},
                {
                 TagBox[
                  TooltipBox[
                   StyleBox["\<\" Transparency\"\>", "InformationRowLabel",
                    StripOnInput->False],
                   "\"Transparency\"",
                   TooltipStyle->"TextStyling"],
                  Annotation[#, "Transparency", "Tooltip"]& ], "False"},
                {
                 TagBox[
                  TooltipBox[
                   StyleBox["\<\" Data Type\"\>", "InformationRowLabel",
                    StripOnInput->False],
                   "\"DataType\"",
                   TooltipStyle->"TextStyling"],
                  Annotation[#, "DataType", "Tooltip"]& ], "\<\"Byte\"\>"}
               },
               AutoDelete->False,
               GridBoxAlignment->{"Columns" -> {Right, Left}},
               GridBoxDividers->None,
               GridBoxItemSize->{"Columns" -> {Automatic, Automatic}},
               GridBoxSpacings->{"Columns" -> {
                   Offset[0.27999999999999997`], {
                    Offset[0.5599999999999999]}, 
                   Offset[0.27999999999999997`]}, "Rows" -> {
                   Offset[0.2], {
                    Offset[0.8]}, 
                   Offset[0.2]}}], "DialogStyle",
              StripOnInput->False],
             DynamicModuleValues:>{}]}
          },
          DefaultBaseStyle->"Column",
          GridBoxAlignment->{"Columns" -> {{Left}}},
          GridBoxDividers->{"Columns" -> {{False}}, "Rows" -> {{False}}},
          
          GridBoxItemSize->{
           "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}},
          GridBoxSpacings->{"Columns" -> {
              Offset[0.27999999999999997`], {
               Offset[0.5599999999999999]}, 
              Offset[0.27999999999999997`]}, "Rows" -> {
              Offset[0.2], {
               Offset[3.6]}, 
              Offset[0.2]}}],
         FrameMargins->6]}
      },
      DefaultBaseStyle->"Column",
      FrameStyle->Directive[
        GrayLevel[0.8], 
        Thickness[Tiny]],
      GridBoxAlignment->{"Columns" -> {{Left}}},
      GridBoxDividers->{
       "Columns" -> {{None}}, "Rows" -> {False, {True}, False}},
      GridBoxItemSize->{"Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}],
     
     "Column"],
    BaseStyle->"InformationGridFrame",
    StripOnInput->False], "InformationGridPlain",
   StripOnInput->False],
  InformationData[
   Association[
   "ObjectType" -> "Image", "ColorSpace" -> "RGB", 
    "ImageDimensions" -> {300, 128}, "Channels" -> 3, "Interleaving" -> True, 
    "Transparency" -> False, "DataType" -> "Byte"], True]]], "Output",
 CellChangeTimes->{
  3.782588016847875*^9, {3.78258811334753*^9, 3.7825881340101547`*^9}, 
   3.789179647635508*^9, 3.7891914713902493`*^9, {3.7891927001076527`*^9, 
   3.789192703875506*^9}},
 CellLabel->"Out[18]=",ExpressionUUID->"50d7d397-bb6c-4387-b45a-6ab4ff119536"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"br", "[", "1", "]"}], "=", 
  RowBox[{"Binarize", "[", 
   RowBox[{"r", "[", "1", "]"}], "]"}]}]], "Input",
 CellChangeTimes->{{3.7891928827280684`*^9, 3.7891929099726543`*^9}},
 CellLabel->"In[20]:=",ExpressionUUID->"5cdbae9a-a12f-473e-95de-1b25ca05d22e"],

Cell[BoxData[
 GraphicsBox[
  TagBox[RasterBox[CompressedData["
1:eJzt0DFKQ0EUQNGJlduwdwG2lrZxBQlEO4UoiJ1LNwFruZqMGD0H5sNnHp//
7sX6cXl3NsZ4Ot89lquX6+129Xq7f7l5eN7cb7ZX6/312+5cLsZYAAAAAAAA
AADAPzY+HGvud5izlVZaaVVp1WnVadVp1WnVadVp1WnVadVp1WnVadVp1WnV
adVp1WnVadVp1WnVadVp1WnVzW1VHbrFz5izlVZaaVVp1WnVadXNbfX9ua/+
1/HN2GpOq0PN+ebfbDWDVp1WnVadVp1WnVadVp1WnVadVp1WnVadVp1WnVad
Vp1WnVadVp1WnVadVp1WnVadVt2krer0KbaqcyeyFQAAAAAAAAAAAMBn3gF9
/pWi
    "], {{0, 128}, {300, 0}}, {0, 1},
    ColorFunction->GrayLevel],
   BoxForm`ImageTag["Bit", ColorSpace -> Automatic, Interleaving -> None],
   Selectable->False],
  DefaultBaseStyle->"ImageGraphics",
  ImageSize->100,
  ImageSizeRaw->{300, 128},
  PlotRange->{{0, 300}, {0, 128}}]], "Output",
 CellChangeTimes->{{3.789192893896064*^9, 3.789192916367405*^9}},
 CellLabel->"Out[20]=",ExpressionUUID->"46de9a9f-2496-44db-8cb9-0030b8a53773"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Export", "[", 
  RowBox[{"\"\<OSRA-test/br1.jpg\>\"", ",", 
   RowBox[{"br", "[", "1", "]"}]}], "]"}]], "Input",
 CellChangeTimes->{{3.7891924876045218`*^9, 3.789192491945668*^9}, {
  3.789192566897203*^9, 3.789192579290608*^9}, {3.789192681336383*^9, 
  3.789192686115203*^9}, {3.7891929212765493`*^9, 3.789192932078871*^9}},
 CellLabel->"In[21]:=",ExpressionUUID->"ef57cb78-e672-4705-8832-fafc23cf6b42"],

Cell[BoxData["\<\"OSRA-test/br1.jpg\"\>"], "Output",
 CellChangeTimes->{3.789192580500893*^9, 3.789192937473711*^9},
 CellLabel->"Out[21]=",ExpressionUUID->"8503def1-e582-4d0b-859b-ef49966cf659"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"s", "=", 
  RowBox[{"ChemicalData", "[", 
   RowBox[{
    RowBox[{"cdata", "[", 
     RowBox[{"[", "1", "]"}], "]"}], ",", "\"\<SMILES\>\""}], 
   "]"}]}]], "Input",
 CellChangeTimes->{{3.782590035230274*^9, 3.782590057729458*^9}},
 CellLabel->"In[16]:=",ExpressionUUID->"3917f5f6-6cf3-4d84-82db-6d9326ca0517"],

Cell[BoxData["\<\"[HH]\"\>"], "Output",
 CellChangeTimes->{3.7825900592605352`*^9, 3.7891796469103203`*^9, 
  3.789191470570911*^9, 3.7891926938212214`*^9},
 CellLabel->"Out[16]=",ExpressionUUID->"997f77e4-0a35-48a1-afb4-d3861191beb3"]
}, Open  ]],

Cell[CellGroupData[{

Cell["train test", "Subsection",
 CellChangeTimes->{{3.789191408256978*^9, 
  3.7891914219692373`*^9}},ExpressionUUID->"ca17fd11-8a51-4a07-a757-\
6ae643ec2ed9"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"NetTrain", "[", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"1", "\[Rule]", "s"}], ",", 
    RowBox[{"1", "\[Rule]", "s"}]}], "}"}], "]"}]], "Input",
 CellChangeTimes->{{3.7825900663012238`*^9, 3.78259007800179*^9}, {
  3.7825915156614227`*^9, 3.782591516712689*^9}, {3.782591621934401*^9, 
  3.7825916647040653`*^9}},
 CellLabel->"In[8]:=",ExpressionUUID->"6978d065-786e-4073-8a48-c1cf9b6e7a0c"],

Cell[BoxData[
 RowBox[{"NetTrain", "[", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"1", "\[Rule]", "\<\"[HH]\"\>"}], ",", 
    RowBox[{"1", "\[Rule]", "\<\"[HH]\"\>"}]}], "}"}], "]"}]], "Output",
 CellChangeTimes->{
  3.782590173397442*^9, 3.782591517785061*^9, {3.782591629033485*^9, 
   3.7825916652502403`*^9}, 3.7891796498753977`*^9, 3.789191472667137*^9},
 CellLabel->"Out[8]=",ExpressionUUID->"0365265f-73e6-4dc1-94f8-db9a1417979f"]
}, Open  ]]
}, Open  ]]
}, Open  ]]
},
WindowSize->{808, 911},
WindowMargins->{{205, Automatic}, {Automatic, 56}},
FrontEndVersion->"12.0 for Linux x86 (64-bit) (2019\:5e745\:67083\:65e5)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[580, 22, 293, 6, 50, "Input",ExpressionUUID->"59b5a4d2-1faa-49de-831f-a1d669c435cd"],
Cell[876, 30, 206, 3, 35, "Output",ExpressionUUID->"1d310aa1-884f-4b21-afc0-38a6a7f783a7"]
}, Open  ]],
Cell[CellGroupData[{
Cell[1119, 38, 151, 3, 68, "Section",ExpressionUUID->"e3441ab6-3c4c-4291-bc55-7615883d132a"],
Cell[1273, 43, 250, 5, 50, "Input",ExpressionUUID->"ee488f20-8a9c-46fa-aaca-720cc00dbedb"],
Cell[CellGroupData[{
Cell[1548, 52, 265, 5, 50, "Input",ExpressionUUID->"45c888c4-1872-44df-aea5-b98bb1565b70"],
Cell[1816, 59, 1020, 23, 38, "Output",ExpressionUUID->"bff60894-43c0-48d0-b924-c98ca6aaedb4"]
}, Open  ]],
Cell[CellGroupData[{
Cell[2873, 87, 625, 13, 50, "Input",ExpressionUUID->"af4ce1bd-514f-404c-8f99-968262a2f3ee"],
Cell[3501, 102, 1636, 32, 60, "Output",ExpressionUUID->"8a71c802-802b-4160-a164-56bfdf9f43ae"]
}, Open  ]],
Cell[CellGroupData[{
Cell[5174, 139, 341, 6, 50, "Input",ExpressionUUID->"c7e7d7a8-182f-49a4-b7bf-ce12db2b88dd"],
Cell[5518, 147, 4949, 122, 149, "Output",ExpressionUUID->"50d7d397-bb6c-4387-b45a-6ab4ff119536"]
}, Open  ]],
Cell[CellGroupData[{
Cell[10504, 274, 291, 6, 50, "Input",ExpressionUUID->"5cdbae9a-a12f-473e-95de-1b25ca05d22e"],
Cell[10798, 282, 878, 19, 60, "Output",ExpressionUUID->"46de9a9f-2496-44db-8cb9-0030b8a53773"]
}, Open  ]],
Cell[CellGroupData[{
Cell[11713, 306, 429, 7, 50, "Input",ExpressionUUID->"ef57cb78-e672-4705-8832-fafc23cf6b42"],
Cell[12145, 315, 195, 2, 35, "Output",ExpressionUUID->"8503def1-e582-4d0b-859b-ef49966cf659"]
}, Open  ]],
Cell[CellGroupData[{
Cell[12377, 322, 334, 8, 50, "Input",ExpressionUUID->"3917f5f6-6cf3-4d84-82db-6d9326ca0517"],
Cell[12714, 332, 235, 3, 35, "Output",ExpressionUUID->"997f77e4-0a35-48a1-afb4-d3861191beb3"]
}, Open  ]],
Cell[CellGroupData[{
Cell[12986, 340, 160, 3, 55, "Subsection",ExpressionUUID->"ca17fd11-8a51-4a07-a757-6ae643ec2ed9"],
Cell[CellGroupData[{
Cell[13171, 347, 417, 9, 50, "Input",ExpressionUUID->"6978d065-786e-4073-8a48-c1cf9b6e7a0c"],
Cell[13591, 358, 436, 9, 35, "Output",ExpressionUUID->"0365265f-73e6-4dc1-94f8-db9a1417979f"]
}, Open  ]]
}, Open  ]]
}, Open  ]]
}
]
*)

